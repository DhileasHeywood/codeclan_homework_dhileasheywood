---
title: "R Notebook"
output: html_notebook
---

Here is a set of data on housing sale prices for the last few years in King County, near Seattle, between May 2014, and May 2015. 

First I'm going to tidy the data in a suitable way, so that it's ready for regression. 

```{r}
library(tidyverse)
library(GGally)
```


```{r}
houses <- read_csv("data/kc_house_data.csv")

# selecting - id, because ID will be strongly correlated with price, for obvious reasons. Also removing date (unimportant), sqft_living15 (not interested in square footage of the nearest 15 houses), sqft_lot15, and zipcode (as long and lat will provide a better understanding of location)

houses <- houses %>% 
  select(-id, -date, -sqft_living15, -sqft_lot15, -zipcode)
```
```{r}
unique(houses$condition)
unique(houses$grade)
```

 converting yr_renovated and waterfront to logical variable for sake of simplicity.
 Converting condition to dummy variables. 
 
```{r}
houses_clean <- houses %>% 
  #mutate(renovated = ifelse(yr_renovated == 0, yr_renovated == 0, yr_renovated == 1), waterfront = as.logical(waterfront)) %>% 
  mutate(condition_1 = ifelse(houses$condition == 1, 1, 0),
         condition_2 = ifelse(houses$condition == 2, 1, 0), 
         condition_3 = ifelse(houses$condition == 3, 1, 0),
         condition_4 = ifelse(houses$condition == 4, 1, 0)) %>% 
  select(-condition) %>% 
  mutate(grade_1 = ifelse(grade == 1, 1, 0),
         grade_2 = ifelse(grade == 2, 1, 0),
         grade_3 = ifelse(grade == 3, 1, 0),
         grade_4 = ifelse(grade == 4, 1, 0),
         grade_5 = ifelse(grade == 5, 1, 0),
         grade_6 = ifelse(grade == 6, 1, 0),
         grade_7 = ifelse(grade == 7, 1, 0),
         grade_8 = ifelse(grade == 8, 1, 0),
         grade_9 = ifelse(grade == 9, 1, 0),
         grade_10 = ifelse(grade == 10, 1, 0),
         grade_11 = ifelse(grade == 11, 1, 0),
         grade_12 = ifelse(grade == 12, 1, 0)) %>% 
  select(-grade)
  
```


checking for aliased variables, then removing variables that lead to an alias
```{r}
alias(price ~ ., data = houses_clean)
```
From this, it looks like sqft_basement is strongly correlated with sqft_living and sqft_above. For this reason, I'll remove it from the data. 

```{r}
houses_clean <- houses_clean %>% 
  select(-sqft_basement)
```

I'm now going to systematically build a regression model containing up to four main effects. I'll test the regression diagnostics as I go. 

```{r}
houses_numeric <- houses_clean %>% 
  
```

